<!-- community.component.html -->
<nav class="navbar navbar-expand-lg navbar-dark bg-dark">
  <div class="container">
    <a class="navbar-brand" href="#">Community Support</a>
  </div>
</nav>

<div class="container mt-4">
  <!-- Banner -->
  <div class="banner text-center p-4 rounded mb-4">
    <h1 class="text-white">Share Your Story, Find Support</h1>
  </div>

  <!-- Post Submission -->
  <div class="card p-4 mb-4">
    <textarea [(ngModel)]="newPost.content" class="form-control" placeholder="Share your story..." rows="4"></textarea>
    <button class="btn btn-primary mt-3" (click)="submitPost()">Post</button>
  </div>

  <!-- Posts List -->
  <div class="row">
    <div class="col-md-6 mb-3" *ngFor="let post of posts">
      <div class="card shadow-sm p-3">
        <h4>{{ post.title }}</h4>
        <p>{{ post.content }}</p>
        <button class="btn btn-outline-primary btn-sm" (click)="openCommentsModal(post)">View Comments</button>
      </div>
    </div>
  </div>
</div>

<!-- Comments Modal -->
<div class="modal fade show" *ngIf="selectedPost" style="display: block; background: rgba(0, 0, 0, 0.5);" (click)="closeModal()">
  <div class="modal-dialog" (click)="$event.stopPropagation()">
    <div class="modal-content p-4">
      <h4>Comments</h4>
      <div class="comments-list mb-3">
        <p *ngFor="let comment of selectedPost.comments" class="border-bottom py-2">{{ comment.content }}</p>
      </div>
      <textarea [(ngModel)]="newComment" class="form-control" placeholder="Write a comment..."></textarea>
      <button class="btn btn-success mt-2" (click)="addComment()">Comment</button>
      <button class="btn btn-secondary mt-2" (click)="closeModal()">Close</button>
    </div>
  </div>
</div>

<!-- community.component.ts -->
import { Component } from '@angular/core';

@Component({
  selector: 'app-community',
  templateUrl: './community.component.html',
  styleUrls: ['./community.component.css']
})
export class CommunityComponent {
  posts = [
    { title: 'Feeling Down', content: 'I have been struggling lately...', comments: [] },
    { title: 'Need Support', content: 'Anyone else experiencing anxiety?', comments: [] }
  ];
  
  newPost = { content: '' };
  newComment = '';
  selectedPost: any = null;

  submitPost() {
    if (this.newPost.content.trim()) {
      this.posts.push({ title: 'Anonymous', content: this.newPost.content, comments: [] });
      this.newPost.content = '';
    }
  }

  openCommentsModal(post: any) {
    this.selectedPost = post;
  }

  closeModal() {
    this.selectedPost = null;
  }

  addComment() {
    if (this.newComment.trim() && this.selectedPost) {
      this.selectedPost.comments.push({ content: this.newComment });
      this.newComment = '';
    }
  }
}

/* community.component.css */
.banner {
  background-color: #03585F;
  color: white;
}

.card {
  border-radius: 10px;
}

.btn-primary {
  background-color: #ED9571;
  border: none;
}

.btn-outline-primary {
  color: #03585F;
  border-color: #03585F;
}

.btn-success {
  background-color: #03585F;
}

.modal-content {
  border-radius: 10px;
  width: 100%;
}
